# 빈의 스코프

**스코프**
	● 싱글톤
	● 프로토타입
			○ Request
			○ Session
			○ WebSocket
			○ ...

**프로토타입 빈이 싱글톤 빈을 참조하면?**

​	● 아무 문제 없음.

**싱글톤 빈이 프로토타입 빈을 참조하면?**
	● 프로토타입 빈이 업데이트가 안되네?
	● 업데이트 하려면
			○ scoped-proxy
			○ Object-Provider
			○ Provider (표준)

**프록시**

* [프록시패턴](https://en.wikipedia.org/wiki/Proxy_pattern)

**싱글톤 객체 사용시 주의할 점**
	● 프로퍼티가 공유.
	● ApplicationContext 초기 구동시 인스턴스 생성.

---

## 스코프

* 기본적으로 빈은 `싱글톤` 스코프를 가진다.

* 다른 스코프를 가질 수 있지만 대부분의 경우에는 싱글톤 스코프만 쓰게될 것이다.

* 해당 인스턴스를 어떠한 스코프에 따라 새로 만들어야 되는 경우에는 스포크를 변경해줘야 한다.

  

#### 싱글톤

애플리케이션 전반에 걸쳐서 해당 빈의 인스턴스가 오직 한개 뿐이다.



※  [실습] 

Proto와 Single 클래스를 만들어주고 @Component로 빈등록

Single이 Proto를 가지도록 한다.

```java
@Component
public class Single {

    @Autowired
    Proto proto;

    public Proto getProto() {
        return proto;
    }
}
```



ApplicationRunner에서 직접 주입받은 Proto와 Single이 주입받은 Proto 정보를 출력

```java
@Component
public class AppRunner implements ApplicationRunner {

    @Autowired
    Single single;

    @Autowired
    Proto proto;


    @Override
    public void run(ApplicationArguments args) throws Exception {
        System.out.println(proto); //AppRunner가 주입받은 proto
        System.out.println(single.getProto()); //Single 객체가 주입받은 proto
    }
}
```

![스크린샷 2020-07-08 오후 7.59.01](https://tva1.sinaimg.cn/large/007S8ZIlgy1ggjrmek49gj30rn06sjsk.jpg)



⇒ **두 인스턴스가 동일하다**는 것을 알 수 있다.



#### 프로토타입

매번 새로운 인스턴스를 만들어서 사용하는 스코프



















