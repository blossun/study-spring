# 스프링 REST 클라이언트 2부: 커스터마이징

RestTemplate

* 기본으로 java.net.HttpURLConnection 사용.
* 커스터마이징
  * 로컬 커스터마이징
  * 글로벌 커스터마이징
    * RestTemplateCustomizer
    * 빈 재정의

WebClient

* 기본으로 Reactor Netty의 HTTP 클라이언트 사용.
* 커스터마이징
  * 로컬 커스터마이징
  * 글로벌 커스터마이징
    * WebClientCustomizer
    * 빈 재정의

---

## WebClient 커스터마이징

`builder`와 `build()`를 호출하기 전에 커스터마이징 할 수 있다.

#### 로컬 커스터마이징

```java
@Override
public void run(ApplicationArguments args) throws Exception {
    WebClient webClient = builder
            .baseUrl("http://localhost:8080")
            .build();
}
```



#### 글로벌 커스터마이징

* `WebClientCustomizer`를 빈으로 등록해주면 된다.

모든 빌더가 다음 설정된 상태로 다른 빈들에 주입이 된다.

```java
@SpringBootApplication
public class SpringbootrestApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootrestApplication.class, args);
    }

    @Bean
    public WebClientCustomizer webClientCustomizer() {
        return new WebClientCustomizer() {
            @Override
            public void customize(WebClient.Builder webClientBuilder) {
                webClientBuilder.baseUrl("http://localhost:8080");
            }
        };
    }

}
```

→ 스프링부트가 WebClientAutoConfiguration으로 만들어주는 빌더가 webClientCustomize에 `webClientBuilder` 로 들어온다. 

이게 싫다면 WebClientCustomizer말고 빌더 자체를 빈으로 등록해서 사용해도 된다.

