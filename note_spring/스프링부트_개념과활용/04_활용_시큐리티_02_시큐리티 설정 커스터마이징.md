# 스프링 시큐리티 2부: 시큐리티 설정 커스터마이징

1. 웹 시큐리티 설정

```java
@Configuration
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
   @Override
   protected void configure(HttpSecurity http) throws Exception {
       http.authorizeRequests()
               .antMatchers("/", "/hello").permitAll()
               .anyRequest().authenticated()
               .and()
           .formLogin()
               .and()
           .httpBasic();
   }
}
```

2. UserDetailsServie 구현

https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-authentication-userdetailsservice

3. PasswordEncoder 설정 및 사용

https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#core-services-password-encoding

---

※ 프로젝트 : springbootsecurity2 - 의존성:web

**(실습 준비)**

* `/hello`, `/my`에 대한 요청을 처리하는 컨트롤러 추가
* index.html, hello.html, my.html 페이지 추가

* Thymleaf로 뷰 렌더링
* security 의존성 추가

#### 목표

* /hello : 모든 사용자가 접근 가능
* /my : 로그인한 사용자만 접근 가능



## 실습

### 1. 특정 URL만 인증을 받도록 웹 시큐리티 설정을 커스터마이징

WebSecurityConfigurerAdapter을 상속받은 웹 시큐리티 설정 생성

※ SecurityAutoConfiguration 자동설정을 쓰지않고 다음과 같이 직접 빈을 등록해서 거의 동일한 기능을 사용할 수 있는 우리만의 웹 시큐리티 설정을 사용할 수 있다.

(이렇게 직접 등록할 경우 스프링부트가 제공하는 SecurityAutoConfiguration은 사용되지 않는다.)

```java
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;

@Configuration
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
  http.authorizeRequests()
               .antMatchers("/", "/hello").permitAll() // '/'와 '/hello'는 모든 사용자에게 접근 허용
               .anyRequest().authenticated() // 그 외의 나머지 모든 요청은 인증이 필요
               .and()
           .formLogin() // 폼 로그인 사용
               .and()
           .httpBasic(); // Basic 인증도 사용
}
```



⇒ 애플리케이션 실행 :  `/`와 `/hello` 는 바로 접근 가능하고, `/my`는 애플리케이션이 제공해주는 유저 정보로 로그인 후 접근 가능



### 2. 스프링 시큐리티가 생성해주는 유저정보를 사용하지 않고, 직접 유저를 생성해서 사용

